resources:
  repositories:
  - repository: MyJavaRepo
    type: github
    endpoint: MyGitHubServiceConnection
    name: 0GiS0/tour-of-heroes-api-java

trigger:
- main

pool: agents-on-aks

steps:
- checkout: MyJavaRepo
- script: echo "Running this job on $(Agent.OS) with name $(Agent.Name) and version $(Agent.Version)"
  displayName: 'Showing OS of the agent'
- task: Gradle@3
  inputs:
    gradleWrapperFile: 'gradlew'
    tasks: 'build'
    publishJUnitResults: true
    testResultsFiles: '**/TEST-*.xml'
    javaHomeOption: 'JDKVersion'
    sonarQubeRunAnalysis: false
    spotBugsAnalysis: false